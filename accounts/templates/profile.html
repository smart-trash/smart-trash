{% extends 'base.html'%}
{% block content %}

<div class="container ">
  <section >
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col col-lg-6 mb-4 mb-lg-0">
          <div class="card mb-3" style="border-radius: .5rem;">
            <div class="row g-0">
              <div class="col-md-4 gradient-custom text-center text-white"
                style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem; background-color: #f4f5f7;">
                {% if request.user.role == 'CU' or request.user.role == 'CA' %}
                <div>
                  <img src="{{user.profile_image_url}}" alt="Avatar" class="img-fluid my-5" style="width: 80px;" />
                </div>
                {%endif%}
                {%if request.user.role == 'CA' %}
                <img src="{{collection_agent.aadhaar_image_url}}" alt="Avatar" class="img-fluid my-5"
                  style="width: 80px;" />
                <h6 style="color:black;">Aadhaar card </h6>
                <img src="{{collection_agent.license_image_url}}" alt="Agent" class="img-fluid my-5"
                  style="width: 80px;" />
                <h6 style="color:black;">License</h6>
                {%endif%}
              </div>
              <div class="col-md-8">

                <div class="card-body p-4">
                  {% if request.user.role == 'RE' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Name</h6>
                      <p class="text-muted">{{request.user.first_name}}</p>
                    </div>
                  </div>
                  {%endif%}
                  {% if request.user.role == 'CU' or request.user.role == 'CA' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>First Name</h6>
                      <p class="text-muted">{{request.user.first_name}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Last Name</h6>
                      <p class="text-muted">{{request.user.last_name}}</p>
                    </div>
                  </div>
                  {%endif%}
                  {% if request.user.role == 'CU' or request.user.role == 'CA' or request.user.role == 'RE' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Phone</h6>
                      <p class="text-muted">{{request.user.phone}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Email</h6>
                      <p class="text-muted">{{request.user.email}}</p>
                    </div>
                  </div>
                  {%endif%}
                  {% if request.user.role == 'RE' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Building Name</h6>
                      <p class="text-muted">{{request.user.housename}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Place</h6>
                      <p class="text-muted">{{request.user.place}}</p>
                    </div>
                  </div>
                  {%endif%}
                  
                 
                    {% if request.user.role == 'CU' or request.user.role == 'CA' %}
                    <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>House Name</h6>
                      <p class="text-muted">{{request.user.housename}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Place</h6>
                      <p class="text-muted">{{request.user.place}}</p>
                    </div>
                    </div>
                    <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Municipality</h6>
                      <p class="text-muted">{{request.user.municipality.first_name}}</p>
                    </div>
                    <div class="col-4 mb-3">
                      <h6>Postcode</h6>
                      <p class="text-muted">{{request.user.postcode}}</p>
                    </div>
                    </div>

                    {%elif request.user.role == 'RE' %}
                    <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Municipality</h6>
                      <p class="text-muted">{{request.user.municipality.first_name}}</p>
                    </div>
                    <div class="col-4 mb-3">
                      <h6>Postcode</h6>
                      <p class="text-muted">{{request.user.postcode}}</p>
                    </div>
                  </div>
                  {%endif%}  
                  {% if request.user.role == 'CU' or request.user.role == 'CA'  %}
                  <div class="row pt-1">
                   
                    <div class="col-4 mb-3">
                      <h6>State</h6>
                      <p class="text-muted">{{request.user.state}}</p>
                    </div>
                    <div class="col-4 mb-3">
                      <h6>Country</h6>
                      <p class="text-muted">{{request.user.country}}</p>
                    </div>
                  </div>
                  {% elif request.user.role == 'RE'  %}
                  <div class="row pt-1">
                    
                    <div class="col-4 mb-3">
                      <h6>State</h6>
                      <p class="text-muted">{{request.user.state}}</p>
                    </div>
                    <div class="col-4 mb-3">
                      <h6>Country</h6>
                      <p class="text-muted">{{request.user.country}}</p>
                    </div>
                  </div>
                  {% elif request.user.role == 'MU' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Name</h6>
                      <p class="text-muted">{{request.user.first_name}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Phone</h6>
                      <p class="text-muted">{{request.user.phone}}</p>
                    </div>
                  </div>
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Email</h6>
                      <p class="text-muted">{{request.user.email}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Postcode</h6>
                      <p class="text-muted">{{request.user.postcode}}</p>
                    </div>
                  </div>
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>State</h6>
                      <p class="text-muted">{{request.user.state}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Country</h6>
                      <p class="text-muted">{{request.user.country}}</p>
                    </div>
                  </div>
                  {%endif%}
                  {% if request.user.role == 'CA' %}
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Aadhaar Number</h6>
                      <p class="text-muted">{{collection_agent.aadhaar_number}}</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>License Number</h6>
                      <p class="text-muted">{{collection_agent.license_number}}</p>
                    </div>

                  </div>

                  {%endif%}

                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
 <hr>
  <div class="row mb-5 mt-4">
    <h2>Edit Profile</h2>
    <br>
    <form method="post" enctype="multipart/form-data" action="{% url 'profile_edit' %}" class="mt-3">
      {%csrf_token%}
      <div class="row mt-2">
        {% if request.user.role == 'CU' or request.user.role == 'CA' %}

        <div class="col-md-6 form-group"><label class="labels">First Name</label><input type="text" class="form-control"
            placeholder="enter First name" name="first_name" required value="{{request.user.first_name}}"></div>
        <div class="col-md-6 form-group"><label class="labels">Last name</label><input type="text" class="form-control"
            placeholder=" enter Last name" name="last_name" required value="{{request.user.last_name}}"></div>
        {%elif request.user.role == 'MU' %}
        <div class="col-md-12 form-group"><label class="labels">Name</label><input type="text" class="form-control"
            placeholder="enter name" name="first_name" required value="{{request.user.first_name}}"></div>
        {%elif request.user.role == 'RE' %}
        <div class="col-md-12 form-group"><label class="labels">Name</label><input type="text" class="form-control"
          placeholder="enter name" name="name" required value="{{request.user.first_name}}"></div>
        {%endif%}
      </div>
      <div class="row ">
        <div class="col-md-6 mt-3">
          <label class="labels">Phone Number</label>
          <input type="text" class="form-control" placeholder="Enter phone number" name="phone" required
            value="{{request.user.phone}}">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">Email ID</label>
          <input type="text" class="form-control" placeholder="Enter email id" name="email" required
            value="{{request.user.email}}">
        </div>
        {% if request.user.role == 'CA' %}
        <div class="col-md-6 mt-3">
          <label class="labels">Aadhaar Number</label>
          <input type="text" class="form-control" placeholder="Enter aadhaar number" name="aadhaar" required
            value="{{collection_agent.aadhaar_number}}">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">Upload Aadhar card</label>
          <input type="file" class="form-control" accept="image/*" name="aadhaar_pic">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">License Number</label>
          <input type="text" class="form-control" placeholder="Enter License number" name="license" required
            value="{{collection_agent.license_number}}">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">Upload License</label>
          <input type="file" class="form-control" accept="image/*" name="license_pic">
        </div>
        {%endif%}
        {% if request.user.role == 'CU' or request.user.role == 'CA' %}

        <div class="col-md-12 mt-3">

          <label class="labels">House Name</label>
          <input class="form-control" placeholder="Enter house name " name="house_name" required
            value="{{request.user.housename}}">
        </div>
        {% elif request.user.role == 'RE' %}
        <div class="col-md-12 mt-3">
          <label class="labels">Building Name</label>
          <input class="form-control" placeholder="Enter building name " name="building_name" required
            value="{{request.user.housename}}">
        </div>
        {%endif%}
        {% if request.user.role == 'CU' or request.user.role == 'CA' or request.user.role == 'RE' %}
        <div class="col-md-4 mt-3">
          <label class="labels">Place</label>
          <input type="text" class="form-control" placeholder="Enter your area" name="place" required
            value="{{request.user.place}}">
        </div>
        <div class="col-md-4 mt-3 ">
          <label class="labels">Municipality</label>
          <select name="municipality" id="municipality" class="form-control" style="padding:0.94rem 1.375rem;">
            {%for municipality in municipalities%}
            <option value="{{municipality.id}}" {%if user.municipality.id == municipality.id %} selected {%endif%}>
              {{municipality.first_name}}</option>
            {%endfor%}
          </select>
        </div>
        {%endif%}
        {% if request.user.role == 'CU' or request.user.role == 'CA' or request.user.role == 'RE' or request.user.role == 'MU' %}
        <div class="col-md-4 mt-3">
          <label class="labels">Postcode</label>
          <input type="text" class="form-control" placeholder="Enter postcode" required name="postcode"
            value="{{request.user.postcode}}">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">State</label>
          <input type="text" class="form-control" placeholder="State" name="state" value="{{request.user.state}}">
        </div>
        <div class="col-md-6 mt-3">
          <label class="labels">Country</label>
          <input type="text" class="form-control" placeholder="Country" name="country" value="{{request.user.country}}">
        </div>
        {%endif%}
        {% if request.user.role == 'CU' or request.user.role == 'CA' %}

        <div class="col-md-6 mt-3">
          <label class="labels">Upload Profile image</label>
          <input type="file" class="form-control" accept="image/*" name="profile_image" id="profile_image">
        </div>
        {%endif%}
      </div>
      <div class=" text-center">
        <button class="btn btn-primary profile-button mt-3" type="submit">UPDATE</button>
      </div>
    </form>
  </div>
  <hr>
  <div class="row mt-4">
    <h2>Change/Reset Password</h2>
    <br>
    <form action="{% url 'change_password'%}" method="post" class="mt-3">
      {%csrf_token%}
      <div class="form-group ">
        <label for="newpassword">Current Password</label>
        <input type="password" class="form-control" id="newpassword" name="currentpoassword">
      </div>
      <div class="form-group">
        <label for="newpassword">New Password</label>
        <input type="password" class="form-control" id="newpassword" name="newpassword">
      </div>
      <div class="form-group">
        <label for="confirm password">Confirm Password</label>
        <input type="password" class="form-control" id="confirmpassword" name="confirmpassword">
      </div>
      <div class=" text-center">
        <button type="submit" class="btn btn-primary profile-button">CHANGE</button>
      </div>
    </form>
  </div>
</div>
{%endblock%}